local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer
local Character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
local HumanoidRootPart = Character:WaitForChild("HumanoidRootPart")

-- Create status text (without background)
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Parent = game.CoreGui

local StatusLabel = Instance.new("TextLabel")
StatusLabel.Parent = ScreenGui
StatusLabel.Text = "No one nearby"
StatusLabel.TextColor3 = Color3.new(1, 1, 1)
StatusLabel.BackgroundTransparency = 1
StatusLabel.Size = UDim2.new(1, 0, 0, 20)
StatusLabel.Position = UDim2.new(0, 0, 0, 5)
StatusLabel.Font = Enum.Font.SourceSans
StatusLabel.TextSize = 14
StatusLabel.TextStrokeTransparency = 0.5

-- Function to find nearest player
local function getNearestPlayer()
    local nearestPlayer = nil
    local shortestDistance = 22 -- Max range
    
    for _, player in pairs(Players:GetPlayers()) do
        if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
            local targetHRP = player.Character.HumanoidRootPart
            local distance = (HumanoidRootPart.Position - targetHRP.Position).Magnitude
            
            if distance < shortestDistance then
                shortestDistance = distance
                nearestPlayer = targetHRP
            end
        end
    end
    
    return nearestPlayer
end

-- Teleport behind player
local function teleportBehind(targetHRP)
    if targetHRP then
        local direction = targetHRP.CFrame.LookVector -- Get player's forward direction
        local newPosition = targetHRP.Position - direction * 6 -- Move 6 studs behind
        newPosition = Vector3.new(newPosition.X, HumanoidRootPart.Position.Y, newPosition.Z) -- Keep Y the same
        
        HumanoidRootPart.CFrame = CFrame.new(newPosition, targetHRP.Position)
    end
end

-- Update status and teleport if needed
RunService.RenderStepped:Connect(function()
    local nearestPlayer = getNearestPlayer()
    if nearestPlayer then
        StatusLabel.Text = "Target found: Teleporting..."
        teleportBehind(nearestPlayer)
        wait(1) -- Add a cooldown to prevent rapid teleporting
    else
        StatusLabel.Text = "No one nearby"
    end
end)
